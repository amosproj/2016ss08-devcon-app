sudo: required

services: 
  - docker

env:
  - TRAVIS_CI_BUILD=true
  
before_script:
  - chmod +x MyConference/docker/build
  - chmod +x deploy_script.sh
  
script:
  # Build .apk file and build docker image (inside docker container)
  - docker run --rm -v $(pwd)/:/build -w /build -e TRAVIS_CI_BUILD clemenshuebner/amos-ss16-proj8-ionic-build:1.0 MyConference/docker/build

# Deploy via script, only on master
deploy:
  provider: script
  script: "./deploy_script.sh"
  skip_cleanup: true
  on:
      branch: master