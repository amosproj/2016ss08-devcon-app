<!--
This file is part of MyConference.

MyConference is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License version 3
as published by the Free Software Foundation.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should find a copy of the GNU Affero General Public License in the
root directory along with this program.
If not, see http://www.gnu.org/licenses/agpl-3.0.html.
-->

<ion-view view-title="{{ 'Sign Up' | translate }}">
  <ion-content>
    <form name="userForm" ng-submit="createAccount(user)" novalidate>
      <ion-list>

        <label class="item item-input">
          <span class="input-label" translate>Email</span>
          <input type="email" name="email" class="form-control" ng-model="user.email"
                 ng-pattern="/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/"
                 required>
        </label>
          <span class="error" ng-show="userForm.email.$error.pattern">
           &nbsp {{ 'WRONG! Email form: name@domain.com' | translate}}</span>

        <label class="item item-input">
          <span class="input-label fixed" translate>Name</span>
          <input type="text" name="first_name" ng-model="user.name" required>
        </label>

        <label class="item item-input">
          <span class="input-label" translate>Given Name</span>
          <input type="text" name="given_name" ng-model="user.gName" required>
        </label>


        <label class="item item-input">

          <span class="input-label" translate>Password</span>
          <input type="password" name="pw1" id="pw1" ng-model="pw1" ng-minlength="6" ng-maxlength="20"
                 ng-pattern="/^(?=.*[!@#$%^&*(0-9]{2,})(?=.*[a-zA-Z]{2,})/" required>
        </label>
         <span class="error" ng-show="userForm.pw1.$error.minlength">
            &nbsp {{ 'need at least 6 characters' | translate}}</span>
        <span class="error" ng-show="!userForm.pw1.$error.minlength && userForm.pw1.$error.pattern">
            &nbsp {{ 'need both characters & number' | translate}}</span>
         <span class="error" ng-show="userForm.pw1.$error.maxlength">
            &nbsp {{ 'shorter than 20 characters' | translate}}</span>

        <label class="item item-input">
          <span class="input-label" translate>Re-Enter Password</span>
          <input type="password" name="pw2" id="pw2" ng-model="user.pass" validate-match="pw1" required>
        </label>
           <span class="error" ng-show="userForm.pw2.$error.match && userForm.pw1.$dirty">
            &nbsp {{ 'Passwords do not match' | translate}}</span>


      </ion-list>

      <div class="padding">
        <button type="submit" class="button button-block button-positive" ng-disabled="userForm.$invalid">
          <span ng-show="!loading" translate>Sign Up</span>
          <i ng-show="loading" class="ion-loading-b"></i>
        </button>
      </div>
    </form>

  </ion-content>

</ion-view>
